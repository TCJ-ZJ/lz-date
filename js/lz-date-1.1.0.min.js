(function(f){var b=/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/;var a=/^(\d{4})-(\d{1,2})-(\d{1,2})$/;var e=0;f.extend({isArray:function(i){return Object.prototype.toString.call(i)==="[object Array]";
},isObject:function(i){return Object.prototype.toString.call(i)==="[object Object]";},isDate:function(i){if(i===undefined||!i){return false;}var j=i.match(b)||i.match(a);
var k=new Date(j[1],j[2]-1,j[3]);return !!(k.getFullYear()==j[1]&&k.getMonth()==j[2]-1&&k.getDate()==j[3]);},formateDate:function(i){var j=i.match(b)||i.match(a);
return j;},getDays:function(j,k){var i=(j%4==0)&&(j%100!=0||j%400==0);return(k==4||k==6||k==9||k==11)?30:k!=2?31:i?29:28;},getWeek:function(i,j){return new Date(i+"/"+j+"/1").getDay();
}});var d=function(i){this.$ele=f(i);this.param=this.$ele.data("lzdate-param");this.status=this.$ele.data("lzdate-status");this.box=this.$ele.data("lzdate-box");
};d.prototype.setEvent=function(){var i=this,j=this.param;if(f.isArray(j.event)){f.each(j.event,function(k,l){i[l]&&i[l]();});}else{i[j.event]&&i[j.event]();
}};d.prototype.display=function(){var l=this.$ele,j=l.get(0),i=this.status,k=this.box;l.off(".lzdate").on("click.lzdate",function(m){m.stopPropagation();
j.dateexcute.setPosition();j.dateexcute.setDate();j.dateexcute.setDays();f(".lzdate-box").css("display","none");k.css("display","block");});k.off(".lzdate").on("click.lzdate",function(m){m.stopPropagation();
});f(document).on("click",function(m){m.preventDefault();f(".lzdate-box").css("display","none");});};d.prototype.change=function(){var l=this.$ele,j=l.get(0),k=this.box,i=this.status;
k.find(".lzdate-header").off(".lzdate").on("click.lzdate",function(o){o.preventDefault();var n=o.target||o.srcElement;if(n.nodeName.toLowerCase()==="p"){var m=f(n);
if(m.hasClass("lzdate-prev-year")){i.year-=1;}if(m.hasClass("lzdate-prev-month")){i.month-=1;}if(m.hasClass("lzdate-next-year")){i.year+=1;}if(m.hasClass("lzdate-next-month")){i.month+=1;
}if(i.month==0){i.year-=1;i.month=12;}else{if(i.month>12){i.year+=1;i.month=1;}}j.dateexcute.setDate();j.dateexcute.setDays();}});};d.prototype.value=function(){var k=this.$ele,j=this.box,l=this.param,i=this.status;
j.find(".lzdate-days").off(".lzdate").on("click.lzdate",function(o){o.preventDefault();var n=o.target||o.srcElement;if(n.nodeName.toLowerCase()==="li"){if(f(n).hasClass("lzdate-disable")){return false;
}var m=f(n).html()=="今天"?new Date(i.cDate).getDate():f(n).html();k.val(i.year+"-"+i.month+"-"+m);i.selectDate=i.year+"-"+i.month+"-"+m;j.css("display","none");
(typeof l._onSelect==="function")&&l._onSelect.call(this,l,i);}});};var h=function(i){this.$ele=f(i);this.param=this.$ele.data("lzdate-param");this.status=this.$ele.data("lzdate-status");
};h.prototype.setPosition=function(){var j=this.$ele,i=j.data("lzdate-box");i.css({top:j.offset().top+j.height()+6,left:j.offset().left});};h.prototype.setDate=function(){var i=this.status,j=this.$ele.data("lzdate-box");
j.find(".lzdate-main").find("span").eq(0).html(i.year);j.find(".lzdate-main").find("span").eq(1).html(i.month);};h.prototype.setDays=function(){var r=this.$ele,k=this.param,o=this.status,q=r.data("lzdate-box"),l=null,n=o.smDate,s=o.lgDate,w=o.cDate,v=f.getDays(o.year,o.month),m=f.getWeek(o.year,o.month),t=document.createDocumentFragment();
for(var p=1;p<v;p++){if(w[1]==o.year&&w[2]==o.month&&w[3]==p&&k.today){l=f("<li>今天</li>").addClass("lzdate-today");}else{l=f("<li>"+p+"</li>");}var j=(n[1]-0)<o.year||(n[1]==o.year&&(n[2]-0)<o.month)||(n[1]==o.year&&n[2]==o.month&&(n[3]-0)<=p);
var u=(s[1]-0)>o.year||(s[1]==o.year&&(s[2]-0)>o.month)||(s[1]==o.year&&s[2]==o.month&&(s[3]-0)>=p);if(!u||!j){l.addClass("lzdate-disable");}f(t).append(l);
}q.find(".lzdate-days").html(t);q.find(".lzdate-days li").eq(0).css("marginLeft",m*32);};var g=function(l,j,i,m,k){this.$ele=f(l);this.$ele.data("lzdate-param",this.initParam(j,i,m,k));
this.$ele.data("lzdate-status",{boxid:null,dateBox:null,cDate:null,lgDate:null,smDate:null,year:null,month:null,selectDate:null,mouseH:false});};g.prototype.layout=function(){var l=this.$ele,m=l.data("lzdate-param"),i=l.data("lzdate-status");
l.attr("readonly","readonly");var k=new Date();i.cDate=f.formateDate(k.getFullYear()+"-"+(k.getMonth()+1)+"-"+k.getDate());i.lgDate=f.formateDate(m.lgDate);
i.smDate=f.formateDate(m.smDate);i.year=k.getFullYear();i.month=k.getMonth()+1;i.boxid="lzbox-"+(e++);var j="";j+="<div id='"+i.boxid+"' class='lzdate-box'>";
j+="<div class='lzdate-header'>";j+="<p class='lzdate-prev-year'></p>";j+="<p class='lzdate-prev-month'></p>";j+="<p class='lzdate-main'>";j+="<span></span>年";
j+="<span></span>月";j+="</p>";j+="<p class='lzdate-next-month'></p>";j+="<p class='lzdate-next-year'></p>";j+="</div>";j+="<ul class='lzdate-weeks'>";j+="<li>日</li><li>一</li><li>二</li><li>三</li><li>四</li><li>五</li><li>六</li>";
j+="</ul>";j+="<ul class='lzdate-days'></ul>";j+="</div>";f("body").append(j);l.data("lzdate-box",f("#"+i.boxid));};g.prototype.initEvent=function(){var j=this.$ele,i=new d(j);
i.setEvent();};g.prototype.initParam=function(j,i,m,l){var k={smDate:"1970-01-01",lgDate:"2020-12-31",today:true,event:["display","change","value"],_onSelect:null};
if(f.isObject(j)){k=f.extend({},k,j);}else{k.smDate=j;k.lgDate=i;k.today=m;k._onSelect=l;}typeof j==="boolean"&&(k.today=j);typeof j==="function"&&(k._onSelect=j);
if(this.$ele.data("lzdate-param")){k=f.extend({},k,this.$ele.data("lzdate-param"));}!f.isDate(k.smDate)&&(k.smDate="1970-01-01");!f.isDate(k.lgDate)&&(k.lgDate="2020-12-31");
k.today=(k.today===false)?false:true;k._onSelect=typeof k._onSelect=="function"?k._onSelect:null;return k;};var c=function(i){this.$ele=f(i);};c.prototype.destory=function(){var i=this.$ele;
f.each(i,function(j,k){f(k).data("lzdate-box").remove();f(k).off(".lzdate");f(k).removeData("lzdate-param").removeData("lzdate-status");});return false;
};c.prototype.init=function(j,i,m,l){var k=this.$ele;f.each(k,function(n,o){f(o).data("lzdate-box").remove();f(o).off(".lzdate");f(o).removeData("lzdate-param").removeData("lzdate-status");
});k.lzdate(j,i,m,l);};c.prototype.getDate=function(){var i=this.$ele.data("lzdate-status");return i.selectDate;};c.prototype.setDate=function(k){var j=this.$ele;
if(f.isDate(k)){var i=f.formateDate(k);f.each(j,function(m,n){var l=f(n).data("lzdate-status");l.year=i[1]-0;l.month=i[2]-0;l.selectDate=k;f(n).val(k);
n.dateexcute.setDate();n.dateexcute.setDays();});}return this;};c.prototype.setSmDate=function(k){var j=this.$ele.data("lzdate-param"),i=this.$ele.data("lzdate-status");
if(f.isDate(k)){j.smDate=k;i.smDate=f.formateDate(k);}return this;};c.prototype.setLgDate=function(k){var j=this.$ele.data("lzdate-param"),i=this.$ele.data("lzdate-status");
if(f.isDate(k)){j.lgDate=k;i.lgDate=f.formateDate(k);}return this;};c.prototype.on=function(k,i){var j=this.$ele;if(k==="select"){f.each(j,function(l,m){if(typeof i==="function"){f(m).data("lzdate-param")._onSelect=i;
}});}return this;};f.fn.dateTool=function(){var i=f(this);return new c(i);};f.fn.lzdate=function(j,i,m,l){var k=f(this);f.each(k,function(o,p){var n=new g(p,j,i,m,l);
p.dateexcute=new h(p);n.layout();n.initEvent();});return k.dateTool();};})(jQuery);